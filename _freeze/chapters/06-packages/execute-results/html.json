{
  "hash": "1348db2d8821c748383cc129955bb648",
  "result": {
    "markdown": "# Packages\n\nFast jede Software hat Erweiterungen irgendeiner Art. Manche haben *extensions*, andere *plug-ins*, wieder andere haben *add-ons*. Unterschiedliche Terminologie für dasselbe Prinzip: Mehr Features durch Erweiterungen anderer Leute.  \nBei Programmiersprachen heißt sowas meistens *library* oder *package*[^ruby].  \n\nR hat sowas natürlich auch, als populäre open-source Software. Hier heißt sowas *packages* und besteht aus Funktionen, die andere Leute für bestimmte Anwendungsfälle geschrieben haben, und durch ein Verteilungssystem verfügbar machen, sodass wir alle sie benutzen können.  \nDer *Kern* von R wird auch **base** genannt und umfasst die wichtigstens Grundfunktionen — mit denen kommen wir auch schon relativ weit, wir können zum Beispiel problemlos diverse Statistiken berechnen und sogar Visualisierungen machen, aber wir wollen natürlich mehr, einfacher, schneller und besser.\n\n## Installieren, Laden, Updaten\n\nPackages ladet ihr aus dem Internet runter, woraufhin sie ggf. kompiliert und in eure R-library eingepflegt werden müssen.  \nDas klingt kompliziert, und deshalb passiert das auch alles automatisch!  \nN\nWir installieren ein package mit einem einfachen Befehl in der Konsole:\n\n```r\ninstall.packages(\"ggplot2\")\n```\n\n:::{.callout-note}\nWindows-BenutzerInnen: Wenn ihr Antivirus-Software benutzt (Norton, Kaspersky, whatever) **kann es sein** dass diese euch beim installieren stört. Ihr bekommt dann wenig aussagekräftige Fehler. **Schaltet eure Antivirus-Software aus** wenn ihr Probleme bei der Installation habt.\n:::\n\n\nAchtet darauf, dass ihr **Groß- und Kleinschreibung beachtet** habt, und dass der Name des packages in `\" \"` steht (wie ein `character`).  \nWenn ihr Enter gedrückt habt sollte R anfangen loszurödeln, vielelicht gehen auch einige Fenster mit Fortschrittsbalken auf, wenn ihr Windows benutzt.  \nDas schöne an diesem Befehl ist, dass es auch direkt alle packages installiert, die wir in unserem package benutzen: Sogenannte *dependencies*. Eine dependency (*Abhängigkeit*) ist in diesem Kontext ein package, das von einem anderen package gebraucht wird um zu funktionieren. Wir benutzen im package `tadaatoolbox` zum Beispiel auch die packages `dplyr`, `pixiedust` und `sjlabelled`, deswegen sollte der Befehl diese packages auch gleich mitinstallieren.  \n\nAlternativ könnt ihr rechts in RStudio im \"Packages\"-Tab den \"Install\"-Button drücken, den namen des packages (`tadaatoolbox`) eingeben, und dann macht RStudio im Hintergrund genau dasselbe Spielchen mit `install.packages()`.\n\nIn diesem Fenster ist auch von *Repositories* die Rede. Damit ist der Web-Adresse gemeint, von der die packages geladen werden sollen. RStudio sollte da automatisch die schnellste Quelle auswählen, aber wenn ihr mal in die Verlegenheit kommt euch entscheiden zu müssen, versucht am besten folgende Adresse:\n\n```\nhttps://cloud.r-project.org\n```\n\nUnd da packages auch nur Software sind, und Software auf dem aktuellen Stand gehalten werden will, bietet es sich an sporadisch (spätestens alle paar Monate) mal den Update-Button zu drücken und einfach alles zu aktualisieren, was aktualisiert werden kann.  \nDas könnt ihr auch aus der Konsole heraus machen indem ihr den Befehl `update.packages(ask = FALSE)` ausführt. R fragt euch dann, ob ihr sicherheitshalber R neustarten wollt, das könnt ihr tun oder auch nicht, aber wenn ihr es *nicht* tut, dann solltet ihr *auf jeden Fall* die R-Session neu starten nachdem ihr alle Updates gemacht habt (`RStudio -> Session -> Restart R`).  \n\nWieso? Nun ja, packages werden von R *geladen*, das heißt verfügbar gemacht, und wenn ihr ein package ersetzt (was beim Update passiert), dann zieht ihr damit R praktisch den Boden unter den Füßen weg und es ist sauer weil Dinge anders sind, als sie eben noch waren.\n\nDieses \"verfügbar machen\" sieht übrigens so aus:\n\n```r\nlibrary(ggplot2)\n```\n\nWenn ihr diesen Befehl ausgeführt hat, dann läd R für die aktuelle Session das package und ihr könnt die Funktionen darin benutzen.  \nNormalerweise beginnen eure R-Scripte mit einer Reihe von `library()`-Befehlen um eure Analyse vorzubereiten und alle benötigten packages zu laden, da ihr diesen Schritt jedes mal wiederholen müsst, wenn ihr eine neue R-Session starten (z.B. beim Neustart von RStudio, Computerneustart etc.).  \nAußerdem gebt ihr so euren KommilitonInnen eine gute Gelegenheit abzuschätzen, was in eurem Script so passiert, wenn sie direkt erkennen können, welche packages ihr dafür benutzt habt.  \n\nEs gibt *tausende* R-packages, und die meisten davon sind für euch vollkommen uninteressant, aber einige wiederum sind so dermaßen praktisch, dass wir sie uns hier im Detail anschauen.\n\n### Quellen\n\nDie wichtigste Quelle für R-packages ist das erwähnte *CRAN*, kurz für *\"**C**omprehensive **R** **A**rchive **N**etwork\"*. Packages müssen diverse Anforderungen erfüllen, um auf CRAN publiziert zu werden, was eine gewisse Hürde darstellt. Deswegen gibt es diverse packages, die gerade in frühen, potenziell noch nicht ausgereiften Versionen an anderen Stellen verfügbar gemacht werden.  \nDie wohl populärster dieser Sekundärquellen ist [**GitHub**](https://github.com).  \n\nOptional könnt ihr packages auch direkt von *GitHub* installieren, was insbesondere dann interessant ist, wenn das package noch jung und experimentell ist.  \nIn euren normalen Projekten solltet ihr euch nicht auf GitHub-packages verlassen, sondern nach Möglichkeit ausschließlich packages von CRAN benutzen, aber wenn euch nach Abenteuer ist, dann fühlt euch frei:\n\n```r\n# Wir brauchen das devtools package\ninstall.packages(\"remotes\")\n\n# remotes package laden\nlibrary(remotes)\n\n# install_github ist eine Funktion aus dem remotes package\ninstall_github(\"tadaadata/tadaatoolbox\")\n```\n\n### Maintenance\n\nPackages installieren ist einfach, aber wie jede Software wollen auch R-packages auf dem neusten Stand gehalten werden. Oder zumindest auf einem \"nicht total veraltet\"-Stand.  \nUpdaten ist ziemlich einfach:  \nEntweder ihr klickt im \"Packages\"-Tab von RStudio auf den \"Update\"-Button, wählt alle Packages aus und installiert die Updates so, oder ihr gebt in der Konsole folgendes ein:\n\n```r\nupdate.packages(ask = FALSE)\n```\n\n…dann rödelt R die Updates durch. RStudio wird euch an dieser Stelle fragen, ob ihr die R-Session vorher neustarten wollt – das könnt ihr tun, aber er könnt damit auch warten bis ihr alle Updates installiert habt anstatt für jedes einzelne Update die Session neuzustarten.  \nWichtig ist auf jeden Fall, dass ihr die R-Session neustartet bevor ihr weiter arbeitet.  \n\n:::{.callout-note}\nWenn ein package geladen (`library()`) ist während ihr Updates durchführt, **muss** die R-Session danach neugestartet werden! Wenn ein package aktualisiert wird während es geladen ist macht das R sehr traurig und Fehler treten auf.\n\nRStudio --> Session --> Restart R\n:::\n\nSolltet ihr mal ein packages löschen wollen, aus welchem Grund auch immer, dann geht das entweder auch über den Package-Tab in RStudio (das Kreuzchen rechts neben dem Namen des packages), oder ihr gebt folgendes in der Konsole ein:\n\n```r\nremove.packages(\"tadaatoolbox\")\n```\n\n…um das package `tadaatoolbox` zu deinstallieren.  \nAber wieso solltet ihr das tun wollen.  \nWir haben so viel Arbeit in das package gesteckt.  \nWieso nur.  \nIhr Monster.\n\n\n#### Tabellen\n\nFür Kreuztabellen, wie wir sie relativ häufig in QM1 brauchen für unsere nominal- und ordinalskalierten Statistiken:\n\n\n::: {.cell hash='06-packages_cache/html/sjplot_tables_1_6fdff482139efcd35129cf0aba0e8c8c'}\n\n:::\n\n\nOder einfache Häufigkeitstabellen:\n\n\n\nUnd für lineare Modelle, in deutlich schöner als `summary()`:\n\n\n::: {.cell hash='06-packages_cache/html/sjplot_tables_3_3599ff584173bf9dfc456e6b4e64153d'}\n\n```{.r .cell-code}\nmodel <- lm(zufrieden ~ alter * berufsvorstellung, data = qmsurvey)\n\n```\n:::\n\n\n\n#### Plots\n\nKlassiker: Histogramm mit Normalverteilungskurve:\n\n\n::: {.cell hash='06-packages_cache/html/sjplot_plots_1_ac20ca787af19f6622bc443dcaaa05da'}\n\n:::\n\n\n## Das `tidyverse`\n\nDas *tidyverse* ist eine Ansammlung von packages, die alle mehr oder weniger gut miteinander auskommen und auf ähnliche Art zu benutzen sind.  \nEine Übersicht und ganz viel Dokumentation und Beispiele findet ihr auf <https://tidyverse.org>.\n\nEs gibt ein *catchall* R-package, das die wichtigstens packages für euch installiert:\n\n```r\ninstall.packages(\"tidyverse\")\n```\n\nIhr könnt danach entweder das package laden und habt damit die wichtigsten Funktionen parat, oder ihr ladet die packages nach Bedarf einzeln.  \nIch würde zu letzterem raten, weil ihr so eher ein Gefühl dafür bekommt welches package für welche Funktionen zuständig ist, und nebenbei geht es auch ein bisschen schneller.\n\nHier eine kurze Übersicht über die wichtigsten *tidyverse*-packages/Funktionen für alltägliche Aufgaben:\n\n- `%>%`: Der *pipe*-Operator aus *magrittr*, der von den meisten der packages *re-exportiert* wird\n- **ggplot2**: Für Visualisierungen\n- **dplyr**: Datenmanipulation\n    - `mutate`: Neue Variablen erstellen/  bestehende Verändern\n    - `select`: Variablen auswählen\n    - `filter`: Datensätze filtern\n    - `group_by`: Gruppieren…\n    - `summarize`: Und zusammenfassen\n- **tidyr**: Datenmanipulation\n    - `gather`: Konvertiert von *wide* in *long* format (mehrere Spalten zu zwei zusammenfassen)\n    - `spread`: Gegenstück, konvertiert von *long* in *wide* format\n\n## Die `tadaatoolbox`\n\nDie `tadaatoolbox` ist das Produkt von Lukas' und Tobis Frustration mit diversem Kleinkram in R, wie etwa der Optik von statistischen Testoutput.  \nIm Fokus steht in erster Linie schnelles, einfaches Output mit möglichst wenig Aufwand. Zusätzlich bietet die Toolbox einige Sammelfunktionen um beispielsweise diverse nominal- oder ordinalskalierte Statistiken auf einen Rutsch anzuzeigen, optimiert auf Output in RMarkdown-Dokumenten (Siehe [Berichte]).  \n\n## Addendum: \"Installier mal alles\"\n\nHier ein Stück Code, das ihr im Zweifelsfall einfach copypasten könnt.  \nEs sollte euch so ziemlich alles oder zumindest das meiste an (vorerst) relevanten packages installieren, und dient mehr so der Vollständigkeit.\n\n```r\ninstall.packages(\"magrittr\")\ninstall.packages(\"ggplot2\")\ninstall.packages(\"dplyr\")\ninstall.packages(\"tidyr\")\ninstall.packages(\"stringr\")\ninstall.packages(\"devtools\")\ninstall.packages(\"forcats\")\ninstall.packages(\"readr\")\ninstall.packages(\"lubridate\")\ninstall.packages(\"purrr\")\ninstall.packages(\"readxl\")\ninstall.packages(\"haven\")\ninstall.packages(\"rvest\")\ninstall.packages(\"scales\")\n\ninstall.packages(\"cowplot\")\ninstall.packages(\"ggrepel\")\ninstall.packages(\"psych\")\ninstall.packages(\"DescTools\")\ninstall.packages(\"ggthemes\")\ninstall.packages(\"hrbrthemes\")\ninstall.packages(\"rmarkdown\")\ninstall.packages(\"viridis\")\ninstall.packages(\"RColorBrewer\")\ninstall.packages(\"nortest\")\ninstall.packages(\"plotly\")\ninstall.packages(\"car\")\ninstall.packages(\"afex\")\n```\n\n[^ruby]: Die Ruby-Leute und ihre *Gems* seien mal dahingestellt\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}